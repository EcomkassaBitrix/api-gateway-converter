{
  "tests": [
    {
      "name": "Test missing token",
      "method": "POST",
      "path": "/",
      "headers": {
        "Origin": "https://poehali.dev"
      },
      "body": {
        "operation": "sell",
        "items": [
          {
            "name": "Test Item",
            "price": 100,
            "quantity": 1,
            "tax": "vat20"
          }
        ]
      },
      "expectedStatus": 401,
      "expectedBody": {
        "error": "string"
      },
      "bodyMatcher": "partial"
    },
    {
      "name": "Test missing group_code in production",
      "method": "POST",
      "path": "/",
      "headers": {
        "X-Auth-Token": "test_token"
      },
      "body": {
        "Request": {
          "Type": "Income",
          "InvoiceId": "test_123",
          "CustomerReceipt": {
            "Items": [
              {
                "Label": "Test",
                "Price": 100.0,
                "Quantity": 1.0,
                "Amount": 100.0,
                "Vat": "VatNo"
              }
            ]
          }
        }
      },
      "expectedStatus": 400,
      "expectedBody": {
        "Status": "Failed",
        "Error": {
          "Code": 400,
          "Message": "group_code is required"
        }
      },
      "bodyMatcher": "partial"
    },
    {
      "name": "Test missing items",
      "method": "POST",
      "path": "/",
      "headers": {
        "X-Auth-Token": "test_token",
        "Origin": "https://poehali.dev"
      },
      "body": {
        "operation": "sell"
      },
      "expectedStatus": 400,
      "expectedBody": {
        "error": "string"
      },
      "bodyMatcher": "partial"
    },
    {
      "name": "Test Ferma format success",
      "method": "POST",
      "path": "/",
      "headers": {
        "X-Auth-Token": "test_token",
        "Origin": "https://poehali.dev"
      },
      "body": {
        "Request": {
          "Type": "Income",
          "InvoiceId": "test_invoice_123",
          "CustomerReceipt": {
            "TaxationSystem": "Common",
            "Email": "test@example.com",
            "Items": [
              {
                "Label": "Тестовый товар",
                "Price": 100.0,
                "Quantity": 1.0,
                "Amount": 100.0,
                "Vat": "Vat20",
                "PaymentMethod": 4
              }
            ],
            "CashlessPayments": [
              {
                "PaymentSum": 100.0
              }
            ]
          }
        }
      },
      "expectedStatus": [200, 401, 500],
      "expectedBody": {
        "Status": "string"
      },
      "bodyMatcher": "partial"
    }
  ]
}